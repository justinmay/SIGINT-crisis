(this["webpackJsonpsigint-react-app"]=this["webpackJsonpsigint-react-app"]||[]).push([[0],{16:function(e,t,n){e.exports=n(26)},21:function(e,t,n){},22:function(e,t,n){},26:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),o=n(9),i=n.n(o),c=(n(21),n(10)),l=n(11),u=n(15),r=n(12),d=n(4),m=n(14),h=(n(22),n(5)),g=function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(u.a)(this,Object(r.a)(t).call(this,e))).state={messages:[],client:h.d.initializeDefaultAppClient("sigint-stitch-xfunj"),text:"",documentid:new h.b.ObjectId("5e545ab16cc1a80fbf8f7f0d")},n.handleChange=n.handleChange.bind(Object(d.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(d.a)(n)),n}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.client.getServiceClient(h.c.factory,"mongodb-atlas").db("sigint-messages").collection("messages"),n={_id:this.state.documentid};t.findOne(n,{}).then((function(t){if(t){console.log("Successfully found document: ".concat(t,"."));var n=t.message;e.setState({messages:n})}else console.log("No document matches the provided query.")})).catch((function(e){return console.error("Failed to find document: ".concat(e))})),this.setState({messageCollection:t}),this.loginAnonymous()}},{key:"updateMessages",value:function(){var e=this,t={_id:this.state.documentid};this.state.messageCollection.findOne(t,{}).then((function(t){if(t){console.log("Successfully found document: ".concat(t,"."));var n=t.message;e.setState({messages:n})}else console.log("No document matches the provided query.")})).catch((function(e){return console.error("Failed to find document: ".concat(e))}))}},{key:"sendMessage",value:function(e){var t=this,n={_id:this.state.documentid},a={$push:{message:e}};this.state.messageCollection.updateOne(n,a,{upsert:!1}).then((function(e){var n=e.matchedCount,a=e.modifiedCount;n&&a&&(console.log("Successfully updated the item."),t.updateMessages())})).catch((function(e){return console.error("Failed to update the item: ".concat(e))}))}},{key:"loginAnonymous",value:function(){var e=new h.a;return this.state.client.auth.loginWithCredential(e)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.sendMessage(this.state.text),this.setState({text:""})}},{key:"handleChange",value:function(e){this.setState({text:e.target.value})}},{key:"render",value:function(){return s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"messageContainer"},this.state.messages.map((function(e,t){return s.a.createElement("div",{key:t,className:"message"},s.a.createElement("div",{className:"messageHeader"},"> SIGINT-2020-1:~ CRISIS$"),s.a.createElement("div",{className:"messageBody"},e))}))),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("label",null,"Name:",s.a.createElement("input",{type:"text",value:this.state.text,onChange:this.handleChange}))))}}]),t}(s.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(s.a.createElement(g,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[16,1,2]]]);
//# sourceMappingURL=main.91142d5b.chunk.js.map